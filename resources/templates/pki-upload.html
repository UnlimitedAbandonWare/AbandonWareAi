<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>SSL ì¸ì¦ íŒŒì¼ ì—…ë¡œë“œ (Thymeleaf)</title>
  <style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f4f7f6;
        margin: 0;
    }
    .upload-container {
        background: #ffffff;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        text-align: center;
        width: 90%;
        max-width: 500px;
    }
    /* ... ì´í•˜ ìŠ¤íƒ€ì¼ì€ ì´ì „ê³¼ ë™ì¼ ... */
  </style>
</head>
<body>
<div class="upload-container">
  <h1>SSL ì¸ì¦ íŒŒì¼ ì—…ë¡œë“œ ğŸ“œ</h1>
  <p>ZeroSSL ë˜ëŠ” Let's Encryptì—ì„œ ë°›ì€ ì¸ì¦ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.</p>

  <form id="uploadForm" enctype="multipart/form-data">
    <label for="fileInput" class="file-input-wrapper">
      <span id="fileLabel">íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ì„¸ìš”</span>
      <div id="fileName">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</div>
    </label>
    <input type="file" id="fileInput" name="file" required>
    <button type="submit" class="upload-btn">ì—…ë¡œë“œ</button>
  </form>

  <div id="result"></div>
</div>
<script>
  // ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¡œì§ì€ ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
  // ì—¬ì „íˆ '/.well-known/pki-validation' APIë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
  const uploadForm = document.getElementById('uploadForm');
  // ... ì´í•˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ì „ê³¼ ë™ì¼ ...
  uploadForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      const formData = new FormData();
      if (uploadForm.file.files.length === 0) {
           document.getElementById('result').innerHTML = '<p class="error">íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>';
           return;
      }
      formData.append('file', uploadForm.file.files[0]);
      document.getElementById('result').innerHTML = '<p>ì—…ë¡œë“œ ì¤‘...</p>';
      try {
          const response = await fetch('/.well-known/pki-validation', {
              method: 'POST',
              body: formData,
          });
          const data = await response.json();
          if (response.ok) {
              document.getElementById('result').innerHTML = `
                  <p class="success">${data.message}</p>
                  <p>ì—…ë¡œë“œëœ íŒŒì¼ì€ <a href="${data.fileUrl}" target="_blank">${data.fileUrl}</a> ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
              `;
          } else {
              document.getElementById('result').innerHTML = `<p class="error">ì—…ë¡œë“œ ì‹¤íŒ¨: ${data.message}</p>`;
          }
      } catch (error) {
           document.getElementById('result').innerHTML = '<p class="error">ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
      }
  });
</script>
</body>
</html>