{
  "timestamp": "2025-10-27T07:34:20",
  "build_system": "gradle",
  "targets": {
    "dpp": "src/main/java/service/rag/rerank/DppDiversityReranker.java",
    "weighted_rrf": "app/src/main/java/com/example/lms/service/rag/fusion/WeightedRRF.java",
    "onnx_runtime": "lms-core/src/main/java/com/abandonware/ai/service/onnx/OnnxRuntimeService.java",
    "upstash_cache": "lms-core/src/main/java/com/abandonware/ai/infra/upstash/UpstashBackedWebCache.java",
    "analyze_web": "lms-core/src/main/java/com/abandonware/ai/service/rag/AnalyzeWebSearchRetriever.java",
    "chat_service": null,
    "application_yml": "app/src/main/resources/application.yml",
    "settings_gradle": "settings.gradle",
    "app_build_kts": "app/build.gradle.kts",
    "root_gradle_kts": "build.gradle.kts"
  },
  "patched_files": [
    "src/main/java/service/rag/rerank/DppDiversityReranker.java",
    "lms-core/src/main/java/com/abandonware/ai/service/onnx/OnnxRuntimeService.java",
    "app/src/main/resources/application.yml"
  ],
  "gradle_toolchain_patched": [],
  "error_hits": {
    "cannot_find_symbol": 57,
    "package_does_not_exist": 21,
    "class_not_found": 3,
    "incompatible_types": 10,
    "spring_context": 35,
    "onnx_runtime": 108,
    "java_version": 4
  },
  "error_samples": {
    "cannot_find_symbol": [
      {
        "path": "BUILD_FIX_NOTES__79_fusion.md",
        "snippet": "- `FusionService.java:36: error: method fuse in class WeightedRRF cannot be applied to given types`\n- `FusionService.java:40: error: cannot find symbol: class SearchResult`\n"
      },
      {
        "path": "build_error_patterns_summary.json",
        "snippet": "    \"\\ncannot find symbol: class ChatService가 컨트롤러/넷티/구현체까지 연쇄적으로 발생\\n(Lombok @RequiredArgsConstructor가 붙은 필드 주입 지점에서 타입을 못 찾으니 애노테이션 라인까지 오류가 전파됨)\",\n    \"\\nerror: cannot find symbol\\nimport com.example.lms.service.ChatService;\",\n    \"\\nmissing_symbol → MissingSymbol → \\\"Cannot find symbol\\\"\\n\","
      },
      {
        "path": "build_error_patterns_summary.json",
        "snippet": "    \"\\ncannot find symbol: class ChatService가 컨트롤러/넷티/구현체까지 연쇄적으로 발생\\n(Lombok @RequiredArgsConstructor가 붙은 필드 주입 지점에서 타입을 못 찾으니 애노테이션 라인까지 오류가 전파됨)\",\n    \"\\nerror: cannot find symbol\\nimport com.example.lms.service.ChatService;\",\n    \"\\nmissing_symbol → MissingSymbol → \\\"Cannot find symbol\\\"\\n\","
      },
      {
        "path": "build_error_patterns_summary.json",
        "snippet": "    \"\\ncannot find symbol: class ChatService가 컨트롤러/넷티/구현체까지 연쇄적으로 발생\\n(Lombok @RequiredArgsConstructor가 붙은 필드 주입 지점에서 타입을 못 찾으니 애노테이션 라인까지 오류가 전파됨)\",\n    \"\\nerror: cannot find symbol\\nimport com.example.lms.service.ChatService;\",\n    \"\\nmissing_symbol → MissingSymbol → \\\"Cannot find symbol\\\"\\n\","
      },
      {
        "path": "build_error_patterns_summary.json",
        "snippet": "    \"\\ncannot find symbol: class ChatService가 컨트롤러/넷티/구현체까지 연쇄적으로 발생\\n(Lombok @RequiredArgsConstructor가 붙은 필드 주입 지점에서 타입을 못 찾으니 애노테이션 라인까지 오류가 전파됨)\",\n    \"\\nerror: cannot find symbol\\nimport com.example.lms.service.ChatService;\",\n    \"\\nmissing_symbol → MissingSymbol → \\\"Cannot find symbol\\\"\\n\","
      }
    ],
    "package_does_not_exist": [
      {
        "path": "BUILD_FIX_NOTES.md",
        "snippet": "- `cannot find symbol: variable calibrator` @ `com.abandonware.ai.service.rag.fusion.WeightedRRF`\n- `cannot find symbol: variable diversity` and `package service.embedding does not exist` @ `com.abandonware.ai.service.rag.handler.DynamicRetrievalHandlerChain`\n"
      },
      {
        "path": "BUILD_PATTERN_SUMMARY.md",
        "snippet": "- `class, interface, enum, or record expected` → **ClassOrInterfaceExpected**\n- `package ... does not exist` → **PackageNotFound**\n"
      },
      {
        "path": "BUILD_PATTERN_SUMMARY.md",
        "snippet": "- `class, interface, enum, or record expected` → **ClassOrInterfaceExpected**\n- `package ... does not exist` → **PackageNotFound**\n"
      },
      {
        "path": "BUILD_PATTERN_RUN.md",
        "snippet": "  - /mnt/data/work_src111_mergsae15_3/BUILD_PATTERN_SUMMARY.md: # BUILD Pattern Summary This summary was auto-generated from recent build failures using the in-repo pattern extractor (`cfvm-raw/src/main/java/com/example/lms/cfvm/BuildLogSlotExtractor.java`). ##...\n  - /mnt/data/work_src111_mergsae15_3/BUILD_ERROR_PATTERN_SCAN.md: # BUILD ERROR PATTERN SCAN (from cfvm-raw/BuildLogSlotExtractor) Det"
      },
      {
        "path": "BUILD_PATTERN_RUN.md",
        "snippet": "  - /mnt/data/work_src111_mergsae15_3/BUILD_PATTERN_SUMMARY.md: # BUILD Pattern Summary This summary was auto-generated from recent build failures using the in-repo pattern extractor (`cfvm-raw/src/main/java/com/example/lms/cfvm/BuildLogSlotExtractor.java`). ##...\n  - /mnt/data/work_src111_mergsae15_3/BUILD_ERROR_PATTERN_SCAN.md: # BUILD ERROR PATTERN SCAN (from cfvm-raw/BuildLogSlotExtractor) Det"
      }
    ],
    "class_not_found": [
      {
        "path": "BUILD_FIX_NOTES.md",
        "snippet": "- `cannot find symbol: variable calibrator` @ `com.abandonware.ai.service.rag.fusion.WeightedRRF`\n- `cannot find symbol: variable diversity` and `package service.embedding does not exist` @ `com.abandonware.ai.service.rag.handler.DynamicRetrievalHandlerChain`\n"
      },
      {
        "path": "BUILD_PATTERN_SUMMARY.md",
        "snippet": "\n1. **MissingSymbol** — `VectorAliasCorrector` not found  \n   - Observed in `AliasCorrectionPreResolveAspect.java` and `CorrectionBootstrapConfig.java`  "
      },
      {
        "path": "scripts/analyze_build_output.py",
        "snippet": "    \"java_package_missing\": re.compile(r\"package\\s+[a-zA-Z0-9_.]+\\s+does not exist\", re.I),\n    \"java_classfile_not_found\": re.compile(r\"class file for\\s+[a-zA-Z0-9_.]+\\s+not found\", re.I),\n    \"java_compilation_failed\": re.compile(r\"\\d+\\s+error(?:s)?\\s*$\", re.I | re.M),"
      }
    ],
    "incompatible_types": [
      {
        "path": "BUILD_FIX_NOTES.md",
        "snippet": "**Errors fixed**\n- `incompatible types: ScoreCalibrator cannot be converted to boolean` @ `com.abandonware.ai.agent.service.rag.fusion.FusionService`\n- `cannot find symbol: variable calibrator` @ `com.abandonware.ai.service.rag.fusion.WeightedRRF`"
      },
      {
        "path": "build_error_patterns_summary.json",
        "snippet": "    \"^\\nC:\\\\AbandonWare\\\\demo-1\\\\demo-1\\\\src\\\\main\\\\java\\\\com\\\\example\\\\lms\\\\api\\\\ChatApiController.java:11: error: cannot find symbol\\nimport com.example.lms.service.ChatService;\",\n    \"cannot find symbol log (ChatApiController 등)\\tLombok 미적용/중복 정의\\t@Slf4j로 통일(중복 Logger import 제거), 필요 시 수동 Logger 한 줄 대안 주석\\ncannot find symbol ChatService (컨트롤러/핸들러)\\t인터페이스 파일 경로 부재\\tdemo-1/.../service/ChatService."
      },
      {
        "path": ".build/error_patterns_db.json",
        "snippet": "    \"java.incompatible_types\": [\n      \"    \\\"> Task :compileJava FAILED\\\\nC:\\\\\\\\AbandonWare\\\\\\\\demo-1\\\\\\\\demo-1\\\\\\\\src\\\\\\\\main\\\\\\\\java\\\\\\\\com\\\\\\\\example\\\\\\\\lms\\\\\\\\api\\\\\\\\ChatApiController.java:11: error: cannot find symbol\\\\nimport com.example.lms.service.ChatService;\\\",\\n    \\\"^\\\\nC:\\\\\\\\AbandonWare\\\\\\\\demo-1\\\\\\\\demo-1\\\\\\\\src\\\\\\\\main\\\\\\\\java\\\\\\\\com\\\\\\\\example\\\\\\\\lms\\\\\\\\api\\\\\\\\ChatApiController.ja"
      },
      {
        "path": "demo-1/buildfix/error-patterns.ndjson",
        "snippet": "{\"path\": \"C:\\\\AbandonWare\\\\demo-1\\\\demo-1\\\\src\\\\main\\\\java\\\\com\\\\example\\\\lms\\\\learning\\\\gemini\\\\GeminiCurationService.java\", \"line\": 52, \"level\": \"error\", \"message\": \"cannot find symbol\"}\n{\"path\": \"C:\\\\AbandonWare\\\\demo-1\\\\demo-1\\\\src\\\\main\\\\java\\\\com\\\\example\\\\lms\\\\search\\\\extract\\\\HybridKeywordExtractor.java\", \"line\": 149, \"level\": \"error\", \"message\": \"incompatible types: String cannot be conve"
      },
      {
        "path": "scripts/analyze_build_output.py",
        "snippet": "    \"java_illegal_start\": re.compile(r\"illegal start of expression\", re.I),\n    \"java_incompatible_types\": re.compile(r\"incompatible types:\", re.I),\n    \"java_unreachable_statement\": re.compile(r\"unreachable statement\", re.I),"
      }
    ],
    "spring_context": [
      {
        "path": "build-logs/2025-10-18-bootRun.log",
        "snippet": "2025-10-18T20:16:00.742+0900 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'searchProbeController' defined in file [C:\\AbandonWare\\demo-1\\demo-1\\build\\classes\\java\\main\\com\\example\\lms\\probe\\Search"
      },
      {
        "path": "build-logs/2025-10-18-bootRun.log",
        "snippet": "2025-10-18T20:16:00.742+0900 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'searchProbeController' defined in file [C:\\AbandonWare\\demo-1\\demo-1\\build\\classes\\java\\main\\com\\example\\lms\\probe\\Search"
      },
      {
        "path": "build-logs/2025-10-18-bootRun.log",
        "snippet": "2025-10-18T20:16:00.742+0900 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'searchProbeController' defined in file [C:\\AbandonWare\\demo-1\\demo-1\\build\\classes\\java\\main\\com\\example\\lms\\probe\\Search"
      },
      {
        "path": "build-logs/2025-10-18-bootRun.log",
        "snippet": "2025-10-18T20:16:00.742+0900 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'searchProbeController' defined in file [C:\\AbandonWare\\demo-1\\demo-1\\build\\classes\\java\\main\\com\\example\\lms\\probe\\Search"
      },
      {
        "path": "build-logs/error_patterns_detail.json",
        "snippet": "  \"spring.beans.unsatisfied-dependency\": [\n    \"2025-10-18T20:16:00.742+0900 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'searchProbeController' defined in file [C:\\\\AbandonWare\\\\demo-1\\\\demo-1\\\\"
      }
    ],
    "onnx_runtime": [
      {
        "path": "BUILD_FIX_NOTES.md",
        "snippet": "- Replaced stray placeholder tokens (`...`) causing **IllegalStartOfType / ClassOrInterfaceExpected** in legacy\n  `WeightedRRF.java` (3 variants) and `OnnxCrossEncoderReranker.java` (3 variants) with minimal, compilable stubs.\n- Left both copies of `HybridRetriever` in place but confirmed they live in different source roots (`src/main/java` vs `app/src/main/java`)"
      },
      {
        "path": "BUILD_PATTERN_SUMMARY.md",
        "snippet": "2. **IllegalStartOfType / ClassOrInterfaceExpected** — stray tokens or brace imbalance  \n   - Examples: `OnnxCrossEncoderReranker.java`, `WeightedRRF.java` (ellipses or extra braces)  \n   - **Fix**: Rewrote minimal, compilable implementations."
      },
      {
        "path": "BUILD_ERROR_PATTERN_SCAN.md",
        "snippet": "### Fix Applied (src111_merge15)\n- Resolved `ILLEGAL_START_EXPRESSION` in `OnnxScoreUtil.java` by closing the private constructor and moving static methods to class scope.\n- Added Javadoc hints and ensured brace structure is valid."
      },
      {
        "path": "BUILD_FIX__onnx_cross_encoder.md",
        "snippet": "# Build Fix — Pattern: IllegalStartOfType → OnnxCrossEncoderReranker\n"
      },
      {
        "path": "BUILD_FIX__onnx_cross_encoder.md",
        "snippet": "# Build Fix — Pattern: IllegalStartOfType → OnnxCrossEncoderReranker\n"
      }
    ],
    "java_version": [
      {
        "path": "scripts/analyze_build_output.py",
        "snippet": "    \"lombok_missing\": re.compile(r\"Lombok processor not found|package lombok does not exist\", re.I),\n    \"java_version_mismatch\": re.compile(r\"Unsupported class file major version|invalid target release\", re.I),\n    \"regex_backref_stray\": re.compile(r\"illegal escape character|dangling meta character|Unclosed group\", re.I),"
      },
      {
        "path": "tools/build_matrix.yaml",
        "snippet": "  - id: invalid_java_release\n    when: \"(invalid source release)|(target release)|Unsupported class file major version\"\n    actions: [ensure_java_17]"
      },
      {
        "path": "scripts/analyze_build_output.py",
        "snippet": "    \"lombok_missing\": re.compile(r\"Lombok processor not found|package lombok does not exist\", re.I),\\n    \"java_version_mismatch\": re.compile(r\"Unsupported class file major version|invalid target release\", re.I),\\n    \"regex_backref_stray\": re.compile(r\"illegal escape character|dangling meta character|Unclosed group\", re.I),"
      },
      {
        "path": "tools/build_matrix.yaml",
        "snippet": "  - id: invalid_java_release\\n    when: \"(invalid source release)|(target release)|Unsupported class file major version\"\\n    actions: [ensure_java_17]"
      }
    ]
  },
  "used_csv_rows": 32,
  "notes": [
    "DppDiversityReranker: removed ContextItem bound; added reflective accessors.",
    "Duplicated ScoreCalibrator/WeightedPowerMeanFuser/MathClamps and DppDiversityReranker into app module for classpath visibility."
  ]
}